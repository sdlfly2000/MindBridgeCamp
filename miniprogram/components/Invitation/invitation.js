"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var invitationService_1 = require("./invitationService");
var util_1 = require("../../utils/util");
Component({
    data: {
        Title: '',
        ParticipantCount: 3,
        LearningContent: '',
        StartDate: '',
        EndDate: '',
        Place: '',
        IsShowSelectDate: false,
        IsShowSelectTime: false,
        CurrentDateTime: 0,
        BookingDate: '',
        BookingHourStart: '',
        BookingHourEnd: '',
        IsEndTime: false
    },
    pageLifetimes: {
        show: function () {
            var currentDateTime = new Date(Date.now());
            var endDateTime = new Date(currentDateTime.getTime() + 3600000);
            this.setData({
                BookingDate: util_1.FormatDate(currentDateTime),
                BookingHourStart: util_1.FormatTime(currentDateTime),
                BookingHourEnd: util_1.FormatTime(endDateTime),
                CurrentDateTime: currentDateTime.getTime()
            });
        }
    },
    methods: {
        InvitationFormInputChange: function (e) {
            var _a;
            var vField = e.currentTarget.dataset.field;
            this.setData((_a = {},
                _a["" + vField] = e.detail,
                _a));
        },
        onSelectDate: function () {
            this.setData({
                IsShowSelectDate: true
            });
        },
        onCloseSelectDate: function () {
            this.setData({
                IsShowSelectDate: false
            });
        },
        onConfirmSelectDate: function (e) {
            this.setData({
                IsShowSelectDate: false,
                CurrentDateTime: e.detail,
                BookingDate: util_1.FormatDate(new Date(e.detail))
            });
        },
        onSelectTime: function (e) {
            if (e.target.id == 'idStartTime') {
                this.setData({
                    IsShowSelectTime: true,
                    IsEndTime: false
                });
            }
            else {
                this.setData({
                    IsShowSelectTime: true,
                    IsEndTime: true
                });
            }
        },
        onCloseSelectTime: function () {
            this.setData({
                IsShowSelectTime: false
            });
        },
        onConfirmSelectTime: function (e) {
            if (this.data.IsEndTime) {
                this.setData({
                    IsShowSelectTime: false,
                    BookingHourEnd: e.detail
                });
            }
            else {
                this.setData({
                    IsShowSelectTime: false,
                    BookingHourStart: e.detail
                });
            }
        },
        SubmitInvitation: function () {
            var model = {
                Title: this.data.Title,
                ParticipantCount: this.data.ParticipantCount,
                LearningContent: this.data.LearningContent,
                StartDate: [this.data.BookingDate, this.data.BookingHourStart].join('T'),
                EndDate: [this.data.BookingDate, this.data.BookingHourEnd].join('T'),
                Place: this.data.Place,
                RoomId: '',
                CreatedBy: '',
                CreatedOn: (new Date(Date.now())).toJSON(),
                CurrentParticipantCount: 1
            };
            console.info(model);
            invitationService_1.invitationService.CreateInvitation(model).then(function () {
                wx.showModal({
                    title: '邀约生成',
                    complete: function () {
                        wx.navigateBack();
                    }
                });
            });
        }
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW52aXRhdGlvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImludml0YXRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSx5REFBd0Q7QUFFeEQseUNBQTBEO0FBRTFELFNBQVMsQ0FBQztJQUNSLElBQUksRUFBQztRQUNILEtBQUssRUFBRSxFQUFFO1FBQ1QsZ0JBQWdCLEVBQUUsQ0FBQztRQUNuQixlQUFlLEVBQUUsRUFBRTtRQUNuQixTQUFTLEVBQUUsRUFBRTtRQUNiLE9BQU8sRUFBRSxFQUFFO1FBQ1gsS0FBSyxFQUFFLEVBQUU7UUFDVCxnQkFBZ0IsRUFBRSxLQUFLO1FBQ3ZCLGdCQUFnQixFQUFFLEtBQUs7UUFDdkIsZUFBZSxFQUFFLENBQUM7UUFDbEIsV0FBVyxFQUFFLEVBQUU7UUFDZixnQkFBZ0IsRUFBRSxFQUFFO1FBQ3BCLGNBQWMsRUFBRSxFQUFFO1FBQ2xCLFNBQVMsRUFBRSxLQUFLO0tBQ2pCO0lBQ0QsYUFBYSxFQUFDO1FBQ1osSUFBSSxFQUFFO1lBQ0osSUFBSSxlQUFlLEdBQUcsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7WUFDM0MsSUFBSSxXQUFXLEdBQUcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sRUFBRSxHQUFHLE9BQU8sQ0FBQyxDQUFDO1lBQ2hFLElBQUksQ0FBQyxPQUFPLENBQUM7Z0JBQ1gsV0FBVyxFQUFFLGlCQUFVLENBQUMsZUFBZSxDQUFDO2dCQUN4QyxnQkFBZ0IsRUFBRSxpQkFBVSxDQUFDLGVBQWUsQ0FBQztnQkFDN0MsY0FBYyxFQUFFLGlCQUFVLENBQUMsV0FBVyxDQUFDO2dCQUN2QyxlQUFlLEVBQUUsZUFBZSxDQUFDLE9BQU8sRUFBRTthQUMzQyxDQUFDLENBQUM7UUFDTCxDQUFDO0tBQ0Y7SUFDRCxPQUFPLEVBQUU7UUFDUCx5QkFBeUIsRUFBRSxVQUFTLENBQUM7O1lBQ25DLElBQUksTUFBTSxHQUFHLENBQUMsQ0FBQyxhQUFh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LGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FDNUM7Z0JBQ0UsRUFBRSxDQUFDLFNBQVMsQ0FBQztvQkFDWCxLQUFLLEVBQUUsTUFBTTtvQkFDYixRQUFRLEVBQUU7d0JBQ1IsRUFBRSxDQUFDLFlBQVksRUFBRSxDQUFDO29CQUNwQixDQUFDO2lCQUNGLENBQUMsQ0FBQztZQUNMLENBQUMsQ0FDRixDQUFDO1FBQ0osQ0FBQztLQUNGO0NBQ0YsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaW52aXRhdGlvblNlcnZpY2UgfSBmcm9tICcuL2ludml0YXRpb25TZXJ2aWNlJztcclxuaW1wb3J0IHsgTGVhcm5pbmdSb29tTW9kZWwgfSBmcm9tICcuL21vZGVscy9MZWFybmluZ1Jvb21Nb2RlbCc7XHJcbmltcG9ydCB7IEZvcm1hdERhdGUsIEZvcm1hdFRpbWUgfSBmcm9tICcuLi8uLi91dGlscy91dGlsJztcclxuXHJcbkNvbXBvbmVudCh7XHJcbiAgZGF0YTp7XHJcbiAgICBUaXRsZTogJycsXHJcbiAgICBQYXJ0aWNpcGFudENvdW50OiAzLFxyXG4gICAgTGVhcm5pbmdDb250ZW50OiAnJyxcclxuICAgIFN0YXJ0RGF0ZTogJycsXHJcbiAgICBFbmREYXRlOiAnJyxcclxuICAgIFBsYWNlOiAnJyxcclxuICAgIElzU2hvd1NlbGVjdERhdGU6IGZhbHNlLFxyXG4gICAgSXNTaG93U2VsZWN0VGltZTogZmFsc2UsXHJcbiAgICBDdXJyZW50RGF0ZVRpbWU6IDAsXHJcbiAgICBCb29raW5nRGF0ZTogJycsXHJcbiAgICBCb29raW5nSG91clN0YXJ0OiAnJyxcclxuICAgIEJvb2tpbmdIb3VyRW5kOiAnJyxcclxuICAgIElzRW5kVGltZTogZmFsc2VcclxuICB9LFxyXG4gIHBhZ2VMaWZldGltZXM6e1xyXG4gICAgc2hvdzogZnVuY3Rpb24oKXtcclxuICAgICAgbGV0IGN1cnJlbnREYXRlVGltZSA9IG5ldyBEYXRlKERhdGUubm93KCkpO1xyXG4gICAgICBsZXQgZW5kRGF0ZVRpbWUgPSBuZXcgRGF0ZShjdXJyZW50RGF0ZVRpbWUuZ2V0VGltZSgpICsgMzYwMDAwMCk7XHJcbiAgICAgIHRoaXMuc2V0RGF0YSh7XHJcbiAgICAgICAgQm9va2luZ0RhdGU6IEZvcm1hdERhdGUoY3VycmVudERhdGVUaW1lKSxcclxuICAgICAgICBCb29raW5nSG91clN0YXJ0OiBGb3JtYXRUaW1lKGN1cnJlbnREYXRlVGltZSksXHJcbiAgICAgICAgQm9va2luZ0hvdXJFbmQ6IEZvcm1hdFRpbWUoZW5kRGF0ZVRpbWUpLFxyXG4gICAgICAgIEN1cnJlbnREYXRlVGltZTogY3VycmVudERhdGVUaW1lLmdldFRpbWUoKVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9LFxyXG4gIG1ldGhvZHM6IHtcclxuICAgIEludml0YXRpb25Gb3JtSW5wdXRDaGFuZ2U6IGZ1bmN0aW9uKGUpe1xyXG4gICAgICBsZXQgdkZpZWxkID0gZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZmllbGRcclxuICAgICAgdGhpcy5zZXREYXRhKHtcclxuICAgICAgICAgIFtgJHt2RmllbGR9YF06IGUuZGV0YWlsXHJcbiAgICAgIH0pXHJcbiAgICB9LFxyXG4gICAgb25TZWxlY3REYXRlOiBmdW5jdGlvbigpe1xyXG4gICAgICB0aGlzLnNldERhdGEoe1xyXG4gICAgICAgIElzU2hvd1NlbGVjdERhdGU6IHRydWVcclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgb25DbG9zZVNlbGVjdERhdGU6IGZ1bmN0aW9uKCl7XHJcbiAgICAgIHRoaXMuc2V0RGF0YSh7XHJcbiAgICAgICAgSXNTaG93U2VsZWN0RGF0ZTogZmFsc2VcclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgb25Db25maXJtU2VsZWN0RGF0ZTogZnVuY3Rpb24oZSl7XHJcbiAgICAgIHRoaXMuc2V0RGF0YSh7XHJcbiAgICAgICAgSXNTaG93U2VsZWN0RGF0ZTogZmFsc2UsXHJcbiAgICAgICAgQ3VycmVudERhdGVUaW1lOiBlLmRldGFpbCxcclxuICAgICAgICBCb29raW5nRGF0ZTogRm9ybWF0RGF0ZShuZXcgRGF0ZShlLmRldGFpbCkpXHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIG9uU2VsZWN0VGltZTogZnVuY3Rpb24oZSl7XHJcbiAgICAgIGlmKGUudGFyZ2V0LmlkID09ICdpZFN0YXJ0VGltZScpe1xyXG4gICAgICAgIHRoaXMuc2V0RGF0YSh7XHJcbiAgICAgICAgICBJc1Nob3dTZWxlY3RUaW1lOiB0cnVlLFxyXG4gICAgICAgICAgSXNFbmRUaW1lOiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9ZWxzZXtcclxuICAgICAgICB0aGlzLnNldERhdGEoe1xyXG4gICAgICAgICAgSXNTaG93U2VsZWN0VGltZTogdHJ1ZSxcclxuICAgICAgICAgIElzRW5kVGltZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgb25DbG9zZVNlbGVjdFRpbWU6IGZ1bmN0aW9uKCl7XHJcbiAgICAgIHRoaXMuc2V0RGF0YSh7XHJcbiAgICAgICAgSXNTaG93U2VsZWN0VGltZTogZmFsc2VcclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgb25Db25maXJtU2VsZWN0VGltZTogZnVuY3Rpb24oZSl7XHJcbiAgICAgIGlmKHRoaXMuZGF0YS5Jc0VuZFRpbWUpe1xyXG4gICAgICAgIHRoaXMuc2V0RGF0YSh7XHJcbiAgICAgICAgICBJc1Nob3dTZWxlY3RUaW1lOiBmYWxzZSxcclxuICAgICAgICAgIEJvb2tpbmdIb3VyRW5kOiBlLmRldGFpbFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9ZWxzZXtcclxuICAgICAgICB0aGlzLnNldERhdGEoe1xyXG4gICAgICAgICAgSXNTaG93U2VsZWN0VGltZTogZmFsc2UsXHJcbiAgICAgICAgICBCb29raW5nSG91clN0YXJ0OiBlLmRldGFpbFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgU3VibWl0SW52aXRhdGlvbjogZnVuY3Rpb24oKXtcclxuICAgICAgbGV0IG1vZGVsOiBMZWFybmluZ1Jvb21Nb2RlbCA9IHtcclxuICAgICAgICBUaXRsZTogdGhpcy5kYXRhLlRpdGxlLFxyXG4gICAgICAgIFBhcnRpY2lwYW50Q291bnQ6IHRoaXMuZGF0YS5QYXJ0aWNpcGFudENvdW50LFxyXG4gICAgICAgIExlYXJuaW5nQ29udGVudDogdGhpcy5kYXRhLkxlYXJuaW5nQ29udGVudCxcclxuICAgICAgICBTdGFydERhdGU6IFt0aGlzLmRhdGEuQm9va2luZ0RhdGUsIHRoaXMuZGF0YS5Cb29raW5nSG91clN0YXJ0XS5qb2luKCdUJyksXHJcbiAgICAgICAgRW5kRGF0ZTogIFt0aGlzLmRhdGEuQm9va2luZ0RhdGUsIHRoaXMuZGF0YS5Cb29raW5nSG91ckVuZF0uam9pbignVCcpLFxyXG4gICAgICAgIFBsYWNlOiB0aGlzLmRhdGEuUGxhY2UsXHJcbiAgICAgICAgUm9vbUlkOiAnJyxcclxuICAgICAgICBDcmVhdGVkQnk6ICcnLFxyXG4gICAgICAgIENyZWF0ZWRPbjogKG5ldyBEYXRlKERhdGUubm93KCkpKS50b0pTT04oKSxcclxuICAgICAgICBDdXJyZW50UGFydGljaXBhbnRDb3VudDogMVxyXG4gICAgICB9O1xyXG4gICAgICBjb25zb2xlLmluZm8obW9kZWwpO1xyXG4gICAgICBpbnZpdGF0aW9uU2VydmljZS5DcmVhdGVJbnZpdGF0aW9uKG1vZGVsKS50aGVuKFxyXG4gICAgICAgICgpID0+IHtcclxuICAgICAgICAgIHd4LnNob3dNb2RhbCh7XHJcbiAgICAgICAgICAgIHRpdGxlOiAn6YKA57qm55Sf5oiQJyxcclxuICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgd3gubmF2aWdhdGVCYWNrKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pOyAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgKTsgICAgICBcclxuICAgIH1cclxuICB9XHJcbn0pIl19